<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel Administrativo - CECOVAM</title>
    <style>
        body { font-family: sans-serif; display: none; } /* Oculto hasta poner clave */
        nav { display: flex; justify-content: space-between; padding: 15px; background: #2c3e50; color: white; }
        .menu-izq a { margin-right: 25px; color: white; text-decoration: none; font-weight: bold; }
        .btn-admin { background: #e74c3c; padding: 8px 15px; border-radius: 5px; color: white; text-decoration: none; }
        .section { padding: 30px; border: 2px solid #ddd; margin: 20px; border-radius: 10px; }
    </style>
</head>
<body>
    <script>
        // CAMBIA '1234' POR LA CLAVE QUE TÚ QUIERAS
        var password = prompt("Acceso restringido. Ingresa la clave de administrador:");
        if (password === "1234") {
            document.body.style.display = "block";
        } else {
            alert("Clave incorrecta");
            window.location.href = "inscripcion.html";
        }
    </script>

    <nav>
        <div class="menu-izq">
            <a href="alumnos.html">ALUMNOS</a>
            <a href="docentes.html">DOCENTES</a>
        </div>
        <a href="admin.html" class="btn-admin">ADMINISTRATIVO</a>
    </nav>

    <div class="section">
        <h2>Panel de Comunicación (Solo Personal)</h2>
        <p>Selecciona una imagen o circular para publicar:</p>
        <input type="file" id="archivoImagen" accept="image/*">
        <br><br>
        <button onclick="subirImagen()" style="padding: 10px; background: #27ae60; color: white; border: none; border-radius: 5px; cursor: pointer;">
            PUBLICAR COMUNICADO
        </button>
        <p id="status"></p>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
  apiKey: "AIzaSyDJh57e-sBDK0_8VtFn4EwFOyDDsm8v0lc",
  authDomain: "plataforma-cecovam.firebaseapp.com",
  projectId: "plataforma-cecovam",
  storageBucket: "plataforma-cecovam.firebasestorage.app",
  messagingSenderId: "655865798428",
  appId: "1:655865798428:web:625f020d553385e43d24d9",
  measurementId: "G-H8HXLDQK8J"
};

        // === NO TOCAR ABAJO ===
        firebase.initializeApp(firebaseConfig);
        async function subirImagen() {
            const file = document.getElementById('archivoImagen').files[0];
            if (!file) return alert("Selecciona una imagen");
            document.getElementById('status').innerText = "Subiendo archivo...";
            try {
                const storageRef = firebase.storage().ref('comunicados/' + file.name);
                await storageRef.put(file);
                const url = await storageRef.getDownloadURL();
                await firebase.database().ref('comunicados').push({ url: url, fecha: new Date().toLocaleString() });
                alert("¡Comunicado publicado con éxito!");
                document.getElementById('status').innerText = "";
            } catch (e) { alert("Error al subir: " + e.message); }
        }
    </script>
</body>
</html>
</body>
</html>
